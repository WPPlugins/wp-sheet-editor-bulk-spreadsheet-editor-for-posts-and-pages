!function(t,n){"function"==typeof define&&define.amd?define(["jquery"],function($){return n(t,$)}):"object"==typeof exports?n(t,require("jquery")):n(t,t.jQuery||t.Zepto)}(this,function(t,$){"use strict";var n,e,a="remodal",i=t.REMODAL_GLOBALS&&t.REMODAL_GLOBALS.NAMESPACE||a,o=$.map(["animationstart","webkitAnimationStart","MSAnimationStart","oAnimationStart"],function(t){return t+"."+i}).join(" "),s=$.map(["animationend","webkitAnimationEnd","MSAnimationEnd","oAnimationEnd"],function(t){return t+"."+i}).join(" "),r=$.extend({hashTracking:!0,closeOnConfirm:!0,closeOnCancel:!0,closeOnEscape:!0,closeOnOutsideClick:!0,modifier:""},t.REMODAL_GLOBALS&&t.REMODAL_GLOBALS.DEFAULTS),c={CLOSING:"closing",CLOSED:"closed",OPENING:"opening",OPENED:"opened"},d={CONFIRMATION:"confirmation",CANCELLATION:"cancellation"},l=function(){var t=document.createElement("div").style;return void 0!==t.animationName||void 0!==t.WebkitAnimationName||void 0!==t.MozAnimationName||void 0!==t.msAnimationName||void 0!==t.OAnimationName}(),m=/iPad|iPhone|iPod/.test(navigator.platform);function p(t){if(l&&"none"===t.css("animation-name")&&"none"===t.css("-webkit-animation-name")&&"none"===t.css("-moz-animation-name")&&"none"===t.css("-o-animation-name")&&"none"===t.css("-ms-animation-name"))return 0;var n,e,a,i,o=t.css("animation-duration")||t.css("-webkit-animation-duration")||t.css("-moz-animation-duration")||t.css("-o-animation-duration")||t.css("-ms-animation-duration")||"0s",s=t.css("animation-delay")||t.css("-webkit-animation-delay")||t.css("-moz-animation-delay")||t.css("-o-animation-delay")||t.css("-ms-animation-delay")||"0s",r=t.css("animation-iteration-count")||t.css("-webkit-animation-iteration-count")||t.css("-moz-animation-iteration-count")||t.css("-o-animation-iteration-count")||t.css("-ms-animation-iteration-count")||"1";for(o=o.split(", "),s=s.split(", "),r=r.split(", "),i=0,e=o.length,n=Number.NEGATIVE_INFINITY;i<e;i++)(a=parseFloat(o[i])*parseInt(r[i],10)+parseFloat(s[i]))>n&&(n=a);return n}function u(){if($(document.body).height()<=$(window).height())return 0;var t,n,e=document.createElement("div"),a=document.createElement("div");return e.style.visibility="hidden",e.style.width="100px",document.body.appendChild(e),t=e.offsetWidth,e.style.overflow="scroll",a.style.width="100%",e.appendChild(a),n=a.offsetWidth,e.parentNode.removeChild(e),t-n}function f(){if(!m){var t,n,e=$("html"),a=y("is-locked");e.hasClass(a)||(n=$(document.body),t=parseInt(n.css("padding-right"),10)+u(),n.css("padding-right",t+"px"),e.addClass(a))}}function h(){if(!m){var t,n,e=$("html"),a=y("is-locked");e.hasClass(a)&&(n=$(document.body),t=parseInt(n.css("padding-right"),10)-u(),n.css("padding-right",t+"px"),e.removeClass(a))}}function g(t,n,e,a){var i=y("is",n),o=[y("is",c.CLOSING),y("is",c.OPENING),y("is",c.CLOSED),y("is",c.OPENED)].join(" ");t.$bg.removeClass(o).addClass(i),t.$overlay.removeClass(o).addClass(i),t.$wrapper.removeClass(o).addClass(i),t.$modal.removeClass(o).addClass(i),t.state=n,!e&&t.$modal.trigger({type:n,reason:a},[{reason:a}])}function v(t,n,e){var a=0,i=function(t){t.target===this&&a++},r=function(t){t.target===this&&0==--a&&($.each(["$bg","$overlay","$wrapper","$modal"],function(t,n){e[n].off(o+" "+s)}),n())};$.each(["$bg","$overlay","$wrapper","$modal"],function(t,n){e[n].on(o,i).on(s,r)}),t(),0===p(e.$bg)&&0===p(e.$overlay)&&0===p(e.$wrapper)&&0===p(e.$modal)&&($.each(["$bg","$overlay","$wrapper","$modal"],function(t,n){e[n].off(o+" "+s)}),n())}function C(t){t.state!==c.CLOSED&&($.each(["$bg","$overlay","$wrapper","$modal"],function(n,e){t[e].off(o+" "+s)}),t.$bg.removeClass(t.settings.modifier),t.$overlay.removeClass(t.settings.modifier).hide(),t.$wrapper.hide(),h(),g(t,c.CLOSED,!0))}function O(t){var n,e,a,i,o={};for(i=0,e=(n=(t=t.replace(/\s*:\s*/g,":").replace(/\s*,\s*/g,",")).split(",")).length;i<e;i++)n[i]=n[i].split(":"),("string"==typeof(a=n[i][1])||a instanceof String)&&(a="true"===a||"false"!==a&&a),("string"==typeof a||a instanceof String)&&(a=isNaN(a)?a:+a),o[n[i][0]]=a;return o}function y(){for(var t=i,n=0;n<arguments.length;++n)t+="-"+arguments[n];return t}function E(){var t,e,i=location.hash.replace("#","");if(i){try{e=$("[data-"+a+'-id="'+i+'"]')}catch(t){}e&&e.length&&(t=$[a].lookup[e.data(a)])&&t.settings.hashTracking&&t.open()}else n&&n.state===c.OPENED&&n.settings.hashTracking&&n.close()}function N(t,n){var e=$(document.body),o=this;o.settings=$.extend({},r,n),o.index=$[a].lookup.push(o)-1,o.state=c.CLOSED,o.$overlay=$("."+y("overlay")),o.$overlay.length||(o.$overlay=$("<div>").addClass(y("overlay")+" "+y("is",c.CLOSED)).hide(),e.append(o.$overlay)),o.$bg=$("."+y("bg")).addClass(y("is",c.CLOSED)),o.$modal=t.addClass(i+" "+y("is-initialized")+" "+o.settings.modifier+" "+y("is",c.CLOSED)).attr("tabindex","-1"),o.$wrapper=$("<div>").addClass(y("wrapper")+" "+o.settings.modifier+" "+y("is",c.CLOSED)).hide().append(o.$modal),e.append(o.$wrapper),o.$wrapper.on("click."+i,"[data-"+a+'-action="close"]',function(t){t.preventDefault(),o.close()}),o.$wrapper.on("click."+i,"[data-"+a+'-action="cancel"]',function(t){t.preventDefault(),o.$modal.trigger(d.CANCELLATION),o.settings.closeOnCancel&&o.close(d.CANCELLATION)}),o.$wrapper.on("click."+i,"[data-"+a+'-action="confirm"]',function(t){t.preventDefault(),o.$modal.trigger(d.CONFIRMATION),o.settings.closeOnConfirm&&o.close(d.CONFIRMATION)}),o.$wrapper.on("click."+i,function(t){$(t.target).hasClass(y("wrapper"))&&o.settings.closeOnOutsideClick&&o.close()})}N.prototype.open=function(){var t,i=this;i.state!==c.OPENING&&i.state!==c.CLOSING&&((t=i.$modal.attr("data-"+a+"-id"))&&i.settings.hashTracking&&(e=$(window).scrollTop(),location.hash=t),n&&n!==i&&C(n),n=i,f(),i.$bg.addClass(i.settings.modifier),i.$overlay.addClass(i.settings.modifier).show(),i.$wrapper.show().scrollTop(0),i.$modal.focus(),v(function(){g(i,c.OPENING)},function(){g(i,c.OPENED)},i))},N.prototype.close=function(t){var n=this;n.state!==c.OPENING&&n.state!==c.CLOSING&&(n.settings.hashTracking&&n.$modal.attr("data-"+a+"-id")===location.hash.substr(1)&&(location.hash="",$(window).scrollTop(e)),v(function(){g(n,c.CLOSING,!1,t)},function(){n.$bg.removeClass(n.settings.modifier),n.$overlay.removeClass(n.settings.modifier).hide(),n.$wrapper.hide(),h(),g(n,c.CLOSED,!1,t)},n))},N.prototype.getState=function(){return this.state},N.prototype.destroy=function(){var t=$[a].lookup;C(this),this.$wrapper.remove(),delete t[this.index],0===$.grep(t,function(t){return!!t}).length&&(this.$overlay.remove(),this.$bg.removeClass(y("is",c.CLOSING)+" "+y("is",c.OPENING)+" "+y("is",c.CLOSED)+" "+y("is",c.OPENED)))},$[a]={lookup:[]},$.fn[a]=function(t){var n,e;return this.each(function(i,o){null==(e=$(o)).data(a)?(n=new N(e,t),e.data(a,n.index),n.settings.hashTracking&&e.attr("data-"+a+"-id")===location.hash.substr(1)&&n.open()):n=$[a].lookup[e.data(a)]}),n},$(document).ready(function(){$(document).on("click","[data-"+a+"-target]",function(t){t.preventDefault();var n=t.currentTarget.getAttribute("data-"+a+"-target"),e=$("[data-"+a+'-id="'+n+'"]');$[a].lookup[e.data(a)].open()}),$(document).find("."+i).each(function(t,n){var e=$(n),i=e.data(a+"-options");i?("string"==typeof i||i instanceof String)&&(i=O(i)):i={},e[a](i)}),$(document).on("keydown."+i,function(t){n&&n.settings.closeOnEscape&&n.state===c.OPENED&&27===t.keyCode&&n.close()}),$(window).on("hashchange."+i,E)})});