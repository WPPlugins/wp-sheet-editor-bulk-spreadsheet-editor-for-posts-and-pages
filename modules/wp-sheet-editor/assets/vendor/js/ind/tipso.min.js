!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function($){var t="tipso",o={speed:400,background:"#55b555",titleBackground:"#333333",color:"#ffffff",titleColor:"#ffffff",titleContent:"",showArrow:!0,position:"top",width:200,maxWidth:"",delay:200,hideDelay:0,animationIn:"",animationOut:"",offsetX:0,offsetY:0,arrowWidth:8,tooltipHover:!1,content:null,ajaxContentUrl:null,ajaxContentBuffer:0,contentElementId:null,useTitle:!1,templateEngineFunc:null,onBeforeShow:null,onShow:null,onHide:null};function e(e,r){this.element=e,this.$element=$(this.element),this.doc=$(document),this.win=$(window),this.settings=$.extend({},o,r),"object"==typeof this.$element.data("tipso")&&$.extend(this.settings,this.$element.data("tipso"));for(var i=Object.keys(this.$element.data()),n={},a=0;a<i.length;a++){var d=i[a].replace(t,"");if(""!==d){n[d=d.charAt(0).toLowerCase()+d.slice(1)]=this.$element.data(i[a]);for(var l in this.settings)l.toLowerCase()==d&&(this.settings[l]=n[d])}}this._defaults=o,this._name=t,this._title=this.$element.attr("title"),this.mode="hide",this.ieFade=!s,this.settings.preferedPosition=this.settings.position,this.init()}$.extend(e.prototype,{init:function(){var o=this,e=this.$element;this.doc;if(e.addClass("tipso_style").removeAttr("title"),o.settings.tooltipHover){var r=null,s=null;e.on("mouseover."+t,function(){clearTimeout(r),clearTimeout(s),s=setTimeout(function(){o.show()},150)}),e.on("mouseout."+t,function(){clearTimeout(r),clearTimeout(s),r=setTimeout(function(){o.hide()},200),o.tooltip().on("mouseover."+t,function(){o.mode="tooltipHover"}).on("mouseout."+t,function(){o.mode="show",clearTimeout(r),r=setTimeout(function(){o.hide()},200)})})}else e.on("mouseover."+t,function(){o.show()}),e.on("mouseout."+t,function(){o.hide()});o.settings.ajaxContentUrl&&(o.ajaxContent=null)},tooltip:function(){return this.tipso_bubble||(this.tipso_bubble=$('<div class="tipso_bubble"><div class="tipso_title"></div><div class="tipso_content"></div><div class="tipso_arrow"></div></div>')),this.tipso_bubble},show:function(){var o=this.tooltip(),e=this,r=this.win;!1===e.settings.showArrow?o.find(".tipso_arrow").hide():o.find(".tipso_arrow").show(),"hide"===e.mode&&($.isFunction(e.settings.onBeforeShow)&&e.settings.onBeforeShow(e.$element,e.element,e),e.settings.size&&o.addClass(e.settings.size),e.settings.width?o.css({background:e.settings.background,color:e.settings.color,width:e.settings.width}).hide():e.settings.maxWidth?o.css({background:e.settings.background,color:e.settings.color,maxWidth:e.settings.maxWidth}).hide():o.css({background:e.settings.background,color:e.settings.color,width:200}).hide(),o.find(".tipso_title").css({background:e.settings.titleBackground,color:e.settings.titleColor}),o.find(".tipso_content").html(e.content()),o.find(".tipso_title").html(e.titleContent()),n(e),r.on("resize."+t,function(){e.settings.position=e.settings.preferedPosition,n(e)}),window.clearTimeout(e.timeout),e.timeout=null,e.timeout=window.setTimeout(function(){e.ieFade||""===e.settings.animationIn||""===e.settings.animationOut?o.appendTo("body").stop(!0,!0).fadeIn(e.settings.speed,function(){e.mode="show",$.isFunction(e.settings.onShow)&&e.settings.onShow(e.$element,e.element,e)}):o.remove().appendTo("body").stop(!0,!0).removeClass("animated "+e.settings.animationOut).addClass("noAnimation").removeClass("noAnimation").addClass("animated "+e.settings.animationIn).fadeIn(e.settings.speed,function(){$(this).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("animated "+e.settings.animationIn)}),e.mode="show",$.isFunction(e.settings.onShow)&&e.settings.onShow(e.$element,e.element,e),r.off("resize."+t,null,"tipsoResizeHandler")})},e.settings.delay))},hide:function(o){var e=this,r=this.win,s=this.tooltip(),i=e.settings.hideDelay;o&&(i=0,e.mode="show"),window.clearTimeout(e.timeout),e.timeout=null,e.timeout=window.setTimeout(function(){"tooltipHover"!==e.mode&&(e.ieFade||""===e.settings.animationIn||""===e.settings.animationOut?s.stop(!0,!0).fadeOut(e.settings.speed,function(){$(this).remove(),$.isFunction(e.settings.onHide)&&"show"===e.mode&&e.settings.onHide(e.$element,e.element,e),e.mode="hide",r.off("resize."+t,null,"tipsoResizeHandler")}):s.stop(!0,!0).removeClass("animated "+e.settings.animationIn).addClass("noAnimation").removeClass("noAnimation").addClass("animated "+e.settings.animationOut).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass("animated "+e.settings.animationOut).remove(),$.isFunction(e.settings.onHide)&&"show"===e.mode&&e.settings.onHide(e.$element,e.element,e),e.mode="hide",r.off("resize."+t,null,"tipsoResizeHandler")}))},i)},close:function(){this.hide(!0)},destroy:function(){var o=this.$element,e=this.win;this.doc;o.off("."+t),e.off("resize."+t,null,"tipsoResizeHandler"),o.removeData(t),o.removeClass("tipso_style").attr("title",this._title)},titleContent:function(){var t=this.$element,o=this;return o.settings.titleContent?o.settings.titleContent:t.data("tipso-title")},content:function(){var t,o=this.$element,e=this,r=this._title;return e.settings.ajaxContentUrl?e._ajaxContent?t=e._ajaxContent:(e._ajaxContent=t=$.ajax({type:"GET",url:e.settings.ajaxContentUrl,async:!1}).responseText,e.settings.ajaxContentBuffer>0?setTimeout(function(){e._ajaxContent=null},e.settings.ajaxContentBuffer):e._ajaxContent=null):e.settings.contentElementId?t=$("#"+e.settings.contentElementId).text():e.settings.content?t=e.settings.content:!0===e.settings.useTitle?t=r:"string"==typeof o.data("tipso")&&(t=o.data("tipso")),null!==e.settings.templateEngineFunc&&(t=e.settings.templateEngineFunc(t)),t},update:function(t,o){var e=this;if(!o)return e.settings[t];e.settings[t]=o}});function r(t){var o=t.clone();o.css("visibility","hidden"),$("body").append(o);var e=o.outerHeight(),r=o.outerWidth();return o.remove(),{width:r,height:e}}var s=function(){var t=document.createElement("p").style,o=["ms","O","Moz","Webkit"];if(""===t.transition)return!0;for(;o.length;)if(o.pop()+"Transition"in t)return!0;return!1}();function i(t){t.removeClass("top_right_corner bottom_right_corner top_left_corner bottom_left_corner"),t.find(".tipso_title").removeClass("top_right_corner bottom_right_corner top_left_corner bottom_left_corner")}function n(t){var o,e,s,a=t.tooltip(),d=t.$element,l=t,p=$(window),f=l.settings.background,g=l.titleContent();switch(void 0!==g&&""!==g&&(f=l.settings.titleBackground),d.parent().outerWidth()>p.outerWidth()&&(p=d.parent()),l.settings.position){case"top-right":e=d.offset().left+d.outerWidth(),o=d.offset().top-r(a).height-10,a.find(".tipso_arrow").css({marginLeft:-l.settings.arrowWidth,marginTop:""}),o<p.scrollTop()?(o=d.offset().top+d.outerHeight()+10,a.find(".tipso_arrow").css({"border-bottom-color":f,"border-top-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),i(a),a.addClass("bottom_right_corner"),a.find(".tipso_title").addClass("bottom_right_corner"),a.find(".tipso_arrow").css({"border-left-color":f}),a.removeClass("top-right top bottom left right"),a.addClass("bottom")):(a.find(".tipso_arrow").css({"border-top-color":l.settings.background,"border-bottom-color":"transparent ","border-left-color":"transparent","border-right-color":"transparent"}),i(a),a.addClass("top_right_corner"),a.find(".tipso_arrow").css({"border-left-color":l.settings.background}),a.removeClass("top bottom left right"),a.addClass("top"));break;case"top-left":e=d.offset().left-r(a).width,o=d.offset().top-r(a).height-10,a.find(".tipso_arrow").css({marginLeft:-l.settings.arrowWidth,marginTop:""}),o<p.scrollTop()?(o=d.offset().top+d.outerHeight()+10,a.find(".tipso_arrow").css({"border-bottom-color":f,"border-top-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),i(a),a.addClass("bottom_left_corner"),a.find(".tipso_title").addClass("bottom_left_corner"),a.find(".tipso_arrow").css({"border-right-color":f}),a.removeClass("top-right top bottom left right"),a.addClass("bottom")):(a.find(".tipso_arrow").css({"border-top-color":l.settings.background,"border-bottom-color":"transparent ","border-left-color":"transparent","border-right-color":"transparent"}),i(a),a.addClass("top_left_corner"),a.find(".tipso_arrow").css({"border-right-color":l.settings.background}),a.removeClass("top bottom left right"),a.addClass("top"));break;case"bottom-right":e=d.offset().left+d.outerWidth(),o=d.offset().top+d.outerHeight()+10,a.find(".tipso_arrow").css({marginLeft:-l.settings.arrowWidth,marginTop:""}),o+r(a).height>p.scrollTop()+p.outerHeight()?(o=d.offset().top-r(a).height-10,a.find(".tipso_arrow").css({"border-bottom-color":"transparent","border-top-color":l.settings.background,"border-left-color":"transparent","border-right-color":"transparent"}),i(a),a.addClass("top_right_corner"),a.find(".tipso_title").addClass("top_left_corner"),a.find(".tipso_arrow").css({"border-left-color":l.settings.background}),a.removeClass("top-right top bottom left right"),a.addClass("top")):(a.find(".tipso_arrow").css({"border-top-color":"transparent","border-bottom-color":f,"border-left-color":"transparent","border-right-color":"transparent"}),i(a),a.addClass("bottom_right_corner"),a.find(".tipso_title").addClass("bottom_right_corner"),a.find(".tipso_arrow").css({"border-left-color":f}),a.removeClass("top bottom left right"),a.addClass("bottom"));break;case"bottom-left":e=d.offset().left-r(a).width,o=d.offset().top+d.outerHeight()+10,a.find(".tipso_arrow").css({marginLeft:-l.settings.arrowWidth,marginTop:""}),o+r(a).height>p.scrollTop()+p.outerHeight()?(o=d.offset().top-r(a).height-10,a.find(".tipso_arrow").css({"border-bottom-color":"transparent","border-top-color":l.settings.background,"border-left-color":"transparent","border-right-color":"transparent"}),i(a),a.addClass("top_left_corner"),a.find(".tipso_title").addClass("top_left_corner"),a.find(".tipso_arrow").css({"border-right-color":l.settings.background}),a.removeClass("top-right top bottom left right"),a.addClass("top")):(a.find(".tipso_arrow").css({"border-top-color":"transparent","border-bottom-color":f,"border-left-color":"transparent","border-right-color":"transparent"}),i(a),a.addClass("bottom_left_corner"),a.find(".tipso_title").addClass("bottom_left_corner"),a.find(".tipso_arrow").css({"border-right-color":f}),a.removeClass("top bottom left right"),a.addClass("bottom"));break;case"top":e=d.offset().left+d.outerWidth()/2-r(a).width/2,o=d.offset().top-r(a).height-10,a.find(".tipso_arrow").css({marginLeft:-l.settings.arrowWidth,marginTop:""}),o<p.scrollTop()?(o=d.offset().top+d.outerHeight()+10,a.find(".tipso_arrow").css({"border-bottom-color":f,"border-top-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),a.removeClass("top bottom left right"),a.addClass("bottom")):(a.find(".tipso_arrow").css({"border-top-color":l.settings.background,"border-bottom-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),a.removeClass("top bottom left right"),a.addClass("top"));break;case"bottom":e=d.offset().left+d.outerWidth()/2-r(a).width/2,o=d.offset().top+d.outerHeight()+10,a.find(".tipso_arrow").css({marginLeft:-l.settings.arrowWidth,marginTop:""}),o+r(a).height>p.scrollTop()+p.outerHeight()?(o=d.offset().top-r(a).height-10,a.find(".tipso_arrow").css({"border-top-color":l.settings.background,"border-bottom-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),a.removeClass("top bottom left right"),a.addClass("top")):(a.find(".tipso_arrow").css({"border-bottom-color":f,"border-top-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),a.removeClass("top bottom left right"),a.addClass(l.settings.position));break;case"left":e=d.offset().left-r(a).width-10,o=d.offset().top+d.outerHeight()/2-r(a).height/2,a.find(".tipso_arrow").css({marginTop:-l.settings.arrowWidth,marginLeft:""}),e<p.scrollLeft()?(e=d.offset().left+d.outerWidth()+10,a.find(".tipso_arrow").css({"border-right-color":l.settings.background,"border-left-color":"transparent","border-top-color":"transparent","border-bottom-color":"transparent"}),a.removeClass("top bottom left right"),a.addClass("right")):(a.find(".tipso_arrow").css({"border-left-color":l.settings.background,"border-right-color":"transparent","border-top-color":"transparent","border-bottom-color":"transparent"}),a.removeClass("top bottom left right"),a.addClass(l.settings.position));break;case"right":e=d.offset().left+d.outerWidth()+10,o=d.offset().top+d.outerHeight()/2-r(a).height/2,a.find(".tipso_arrow").css({marginTop:-l.settings.arrowWidth,marginLeft:""}),e+10+l.settings.width>p.scrollLeft()+p.outerWidth()?(e=d.offset().left-r(a).width-10,a.find(".tipso_arrow").css({"border-left-color":l.settings.background,"border-right-color":"transparent","border-top-color":"transparent","border-bottom-color":"transparent"}),a.removeClass("top bottom left right"),a.addClass("left")):(a.find(".tipso_arrow").css({"border-right-color":l.settings.background,"border-left-color":"transparent","border-top-color":"transparent","border-bottom-color":"transparent"}),a.removeClass("top bottom left right"),a.addClass(l.settings.position))}if("top-right"===l.settings.position&&a.find(".tipso_arrow").css({"margin-left":-l.settings.width/2}),"top-left"===l.settings.position&&(c=a.find(".tipso_arrow").eq(0)).css({"margin-left":l.settings.width/2-2*l.settings.arrowWidth}),"bottom-right"===l.settings.position&&(c=a.find(".tipso_arrow").eq(0)).css({"margin-left":-l.settings.width/2,"margin-top":""}),"bottom-left"===l.settings.position){var c=a.find(".tipso_arrow").eq(0);c.css({"margin-left":l.settings.width/2-2*l.settings.arrowWidth,"margin-top":""})}e<p.scrollLeft()&&("bottom"===l.settings.position||"top"===l.settings.position)&&(a.find(".tipso_arrow").css({marginLeft:e-l.settings.arrowWidth}),e=0),e+l.settings.width>p.outerWidth()&&("bottom"===l.settings.position||"top"===l.settings.position)&&(s=p.outerWidth()-(e+l.settings.width),a.find(".tipso_arrow").css({marginLeft:-s-l.settings.arrowWidth,marginTop:""}),e+=s),e<p.scrollLeft()&&("left"===l.settings.position||"right"===l.settings.position||"top-right"===l.settings.position||"top-left"===l.settings.position||"bottom-right"===l.settings.position||"bottom-left"===l.settings.position)&&(e=d.offset().left+d.outerWidth()/2-r(a).width/2,a.find(".tipso_arrow").css({marginLeft:-l.settings.arrowWidth,marginTop:""}),(o=d.offset().top-r(a).height-10)<p.scrollTop()?(o=d.offset().top+d.outerHeight()+10,a.find(".tipso_arrow").css({"border-bottom-color":f,"border-top-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),a.removeClass("top bottom left right"),i(a),a.addClass("bottom")):(a.find(".tipso_arrow").css({"border-top-color":l.settings.background,"border-bottom-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),a.removeClass("top bottom left right"),i(a),a.addClass("top")),e+l.settings.width>p.outerWidth()&&(s=p.outerWidth()-(e+l.settings.width),a.find(".tipso_arrow").css({marginLeft:-s-l.settings.arrowWidth,marginTop:""}),e+=s),e<p.scrollLeft()&&(a.find(".tipso_arrow").css({marginLeft:e-l.settings.arrowWidth}),e=0)),e+l.settings.width>p.outerWidth()&&("left"===l.settings.position||"right"===l.settings.position||"top-right"===l.settings.position||"top-left"===l.settings.position||"bottom-right"===l.settings.position||"bottom-right"===l.settings.position)&&(e=d.offset().left+d.outerWidth()/2-r(a).width/2,a.find(".tipso_arrow").css({marginLeft:-l.settings.arrowWidth,marginTop:""}),(o=d.offset().top-r(a).height-10)<p.scrollTop()?(o=d.offset().top+d.outerHeight()+10,a.find(".tipso_arrow").css({"border-bottom-color":f,"border-top-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),i(a),a.removeClass("top bottom left right"),a.addClass("bottom")):(a.find(".tipso_arrow").css({"border-top-color":l.settings.background,"border-bottom-color":"transparent","border-left-color":"transparent","border-right-color":"transparent"}),i(a),a.removeClass("top bottom left right"),a.addClass("top")),e+l.settings.width>p.outerWidth()&&(s=p.outerWidth()-(e+l.settings.width),a.find(".tipso_arrow").css({marginLeft:-s-l.settings.arrowWidth,marginTop:""}),e+=s),e<p.scrollLeft()&&(a.find(".tipso_arrow").css({marginLeft:e-l.settings.arrowWidth}),e=0)),a.css({left:e+l.settings.offsetX,top:o+l.settings.offsetY}),o<p.scrollTop()&&("right"===l.settings.position||"left"===l.settings.position)&&(d.tipso("update","position","bottom"),n(l)),o+r(a).height>p.scrollTop()+p.outerHeight()&&("right"===l.settings.position||"left"===l.settings.position)&&(d.tipso("update","position","top"),n(l))}$[t]=$.fn[t]=function(r){var s=arguments;if(void 0===r||"object"==typeof r)return this instanceof $||$.extend(o,r),this.each(function(){$.data(this,"plugin_"+t)||$.data(this,"plugin_"+t,new e(this,r))});if("string"==typeof r&&"_"!==r[0]&&"init"!==r){var i;return this.each(function(){var o=$.data(this,"plugin_"+t);o||(o=$.data(this,"plugin_"+t,new e(this,r))),o instanceof e&&"function"==typeof o[r]&&(i=o[r].apply(o,Array.prototype.slice.call(s,1))),"destroy"===r&&$.data(this,"plugin_"+t,null)}),void 0!==i?i:this}}});